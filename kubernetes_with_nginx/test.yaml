apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: test-nginx
  namespace: argocd
  #finalizers:
  #  - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    namespace: argocd
    server: "https://kubernetes.default.svc"
  source:
    path: ""
    repoURL: "https://charts.bitnami.com/bitnami"
    targetRevision: 14.1.0
    chart: "bitnami/nginx"
    helm:
      values: |-
          diagnosticMode:
            enabled: false
            command:
              - sleep
            args:
              - infinity
          image:
            registry: docker.io
            repository: bitnami/nginx
            tag: 1.24.0-debian-11-r5
            digest: ""
            pullPolicy: IfNotPresent
            pullSecrets: []
            debug: false
          replicaCount: 1
  project: default
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
